jQuery(document).ready(function(e){e(document).on("click",".ywbc_apply_barcode",function(a){a.preventDefault();var o=e(this).data("item_ids"),c=e(this).data("barcode_action"),n=e("#ywbc_apply_progressbar_all"),t=e("#ywbc_apply_progressbar_percent_all"),r=e(".ywbc_apply_messages");r.hide(),n.progressbar(),t.html("0% (0/"+o.length+")"),n.show();var s=o.length;e(this).prop("disabled",!0),function a(d,l){var i={ywbc_item_id:l,action:c};e.ajax({type:"POST",url:ywbc_params.ajax_url,data:i,dataType:"json",success:function(c){"barcode_created"==c.result?(n.progressbar("value",(d+1)/s*100),t.html(Math.round((d+1)/s*1e3)/10+"% ("+(d+1)+"/"+o.length+")"),d<s-1?a(++d,o[d]):(r.addClass("complete_all_task"),r.find(".ywbc_apply_icon").addClass("dashicons dashicons-yes"),r.find(".ywbc_apply_icon").css("color","green"),r.find(".ywbc_apply_text").html(ywbc_params.messages.complete_task),r.show(),n.hide(),e(".ywbc_apply_barcode").prop("disabled",!1))):(r.addClass("error_task"),r.find(".ywbc_apply_icon").addClass("dashicons dashicons-no"),r.find(".ywbc_apply_icon").css("color","red"),r.find(".ywbc_apply_text").html(ywbc_params.messages.error_task),r.show(),n.hide(),e(".ywbc_apply_barcode").prop("disabled",!1))}})}(0,o[0])}),e(document).on("click",".ywbc-print-barcode",function(a){a.preventDefault();var o=e(this).data("item_ids"),c=e(".ywbc-print-barcode-tr"),n={action:"print_product_barcodes_document",ywbc_item_ids:o};c.block({message:null,overlayCSS:{background:"#f1f1f1",opacity:.7}}),e.ajax({type:"POST",url:ywbc_params.ajax_url,data:n,success:function(a){console.log("Processing, do not cancel"),e("#aux-print-barcodes").append(a.result);var o=document.getElementById("aux-print-barcodes");newWin=window.open("about:blank"),newWin.document.write(o.outerHTML),setTimeout(function(){newWin.print(),newWin.close()},200),e("#aux-print-barcodes").html(""),c.unblock()},error:function(e){return console.log("ERROR"),console.log(e),c.unblock(),!1}})}),e(document).on("click",".ywbc-print-barcode-by-product",function(a){a.preventDefault();var o=e(this).parent().parent().find(".ywbc-print-barcode-by-product-id #print_barcodes_by_product_select option:last-child").val(),c=e(this).parent().parent().find(".ywbc-print-barcode-by-product-quantity").val();if(console.log(o),null!=o){var n=e(".ywbc-print-barcode-by-product-tr"),t={action:"print_barcodes_by_product_document",ywbc_product_id:o,ywbc_product_quantity:c};n.block({message:null,overlayCSS:{background:"#f1f1f1",opacity:.7}}),e.ajax({type:"POST",url:ywbc_params.ajax_url,data:t,success:function(a){console.log("Processing, do not cancel"),e("#aux-print-barcodes-by-products").append(a.result);var o=document.getElementById("aux-print-barcodes-by-products");newWin=window.open("about:blank"),newWin.document.write(o.outerHTML),setTimeout(function(){newWin.print(),newWin.close()},200),e("#aux-print-barcodes-by-products").html(""),n.unblock()},error:function(e){return console.log("ERROR"),console.log(e),n.unblock(),!1}})}else alert("Select a product")})});
